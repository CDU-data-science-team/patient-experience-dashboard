
<!-- So I need to declare the parameters here, and then pass them through from Shiny -->
<!-- Then I can use an observe() function with the GET string so the report is generated if -->
<!-- The parameters are set using a GET string -->

---
title: My Document
output: html_document
params:
  division: NA
  directorate: NA
  team: NA
  date_from: NA
  date_to: NA
---

```{r setup, include=FALSE}

knitr::opts_chunk$set(echo = FALSE)

```

## Context

```{r}

# what I need more than anything here is a list of the other report areas so I can link 

# fetch the state of the teams

```

## Summary

```{r, results = "asis"}

  if(is.null(dataSummary())){
    
    myString = "Within the selected time and area there were no responses"
  } else {
    
    myString = paste0("<p>Within ", dataSummary()[["theArea"]], " in the selected time there were ", dataSummary()[["NR"]],
                      " responses.</p><br>",
                      "<p>There were ", dataSummary()[["IC"]], " 'What could we do better' responses and ", dataSummary()[["BC"]],
                      " 'What did we do well' responses</p><br>",
                      ifelse(dataSummary()[["NFFT"]] > 9,
                             paste0("<p>The Friends and Family Test Score is the proportion of patients
        who are extremely likely or likely to recommend a service. In the selected period of time it was ",
                                    dataSummary()[["FFT"]], "% (based on ", dataSummary()[["NFFT"]], " responses.)", "</p><br>"), ""),
                      ifelse(dataSummary()[["NSQ"]] > 9,
                             paste0("<p>Service quality rating was ", dataSummary()[["SQ"]], "% (based on ", dataSummary()[["NSQ"]],
                                    " responses.)</p>"), ""),
                      ifelse(sum(dataSummary()[["complaint_numbers"]]) > 3,
                             paste0("<p>", dataSummary()[["complaint_numbers"]][3], " individuals reported that they knew how to make a complaint, ",
                                    dataSummary()[["complaint_numbers"]][2], " reported that they did not know how to make a complaint, and ", 
                                    dataSummary()[["complaint_numbers"]][1], " reported that they were unsure if they knew.</p>"), "")
    )
  }
  
  cat(myString)

```